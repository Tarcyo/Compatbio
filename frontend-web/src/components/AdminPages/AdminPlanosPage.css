/* AdminPlanosPage.css — LIGHT + GLASS
   ✅ Sidebar reservada
   ✅ Card com altura máxima travada
   ✅ Scrollbar interna (somente lista)
   ✅ Itens nunca vazam do card
*/

html, body, #root { height: 100%; }
body { margin: 0; }

:root{
  --accent: rgba(160, 234, 82, 1);

  --bg-0: #ffffff;
  --bg-1: #f7f8fb;

  --border: rgba(15, 23, 42, 0.12);
  --border-2: rgba(15, 23, 42, 0.08);

  --text: rgba(31, 41, 55, 0.92);

  --shadow-lg: 0 30px 90px rgba(15,23,42,0.14);
  --shadow: 0 16px 44px rgba(15,23,42,0.12);
  --shadow-soft: 0 12px 28px rgba(15,23,42,0.10);

  --glass-border: rgba(255,255,255,0.36);

  --r-xl: 38px;
  --r-lg: 30px;
  --pill: 9999px;
}

/* ✅ wrapper da página reserva sidebar */
.apPage{
  --sidebarW: 400px;  /* ajuste para a largura real */
  --pagePad: 24px;
  --cardMaxH: 980px;  /* ✅ limite vertical extra (além do viewport) */

  position: fixed !important;
  top: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  left: var(--sidebarW) !important;

  height: 100dvh !important;
  overflow: hidden !important;

  padding: var(--pagePad) !important;
  box-sizing: border-box !important;

  display: flex !important;
  justify-content: center !important;
  align-items: flex-start !important;

  min-height: 0 !important;
}

@media (max-width: 980px){
  .apPage{
    left: 0 !important;
    --sidebarW: 0px;
    --pagePad: 18px;
  }
}

.apCard, .apCard *{
  box-sizing: border-box !important;
  -webkit-font-smoothing: antialiased !important;
  -moz-osx-font-smoothing: grayscale !important;
  text-rendering: geometricPrecision !important;
}

/* ✅ card travado no viewport + limite extra máximo */
.apCard{
  width: min(1700px, 100%) !important;
  max-width: 100% !important;

  height: calc(100dvh - (var(--pagePad) * 2)) !important;
  max-height: min(calc(100dvh - (var(--pagePad) * 2)), var(--cardMaxH)) !important;

  min-height: 0 !important;          /* ✅ essencial */
  overflow: hidden !important;        /* ✅ nada vaza */

  display: flex !important;
  flex-direction: column !important;

  padding: 60px 66px 30px !important;
  border-radius: var(--r-xl) !important;

  background:
    radial-gradient(1350px 567px at 12% 108%, rgba(160,234,82,0.18), rgba(255,255,255,0) 60%),
    radial-gradient(1215px 567px at 88% 108%, rgba(160,234,82,0.10), rgba(255,255,255,0) 62%),
    linear-gradient(180deg, rgba(255,255,255,0.72) 0%, rgba(247,248,251,0.66) 100%) !important;

  border: 1px solid var(--glass-border) !important;
  box-shadow: var(--shadow-lg), inset 0 1px 0 rgba(255,255,255,0.55) !important;

  position: relative !important;
  -webkit-backdrop-filter: blur(19px) saturate(1.15) !important;
  backdrop-filter: blur(19px) saturate(1.15) !important;

  color: var(--text) !important;
}

.apCard > *{ position: relative !important; z-index: 1 !important; }

.apHeader{
  display:flex !important;
  align-items:flex-start !important;
  justify-content:space-between !important;
  gap: 24px !important;

  margin: 0 0 28px !important;
  padding: 0 12px 20px 0 !important;
  border-bottom: 1px solid rgba(15,23,42,0.08) !important;

  flex-wrap: wrap !important;
}

.apTitle{
  margin: 0 !important;
  font-size: clamp(40px, 4.6vw, 54px) !important;
  font-weight: 1000 !important;
  letter-spacing: -0.02em !important;
}

.apSubtitle{
  margin: 12px 0 0 !important;
  font-size: 20px !important;
  font-weight: 850 !important;
  color: rgba(75,85,99,0.86) !important;
  line-height: 1.35 !important;
  max-width: 720px !important;
}

.apAddBtn{
  height: 78px !important;
  padding: 0 28px !important;
  border-radius: var(--pill) !important;
  border: 1px solid rgba(94,133,66,0.25) !important;

  background:
    linear-gradient(180deg, rgba(0,0,0,0.06) 0%, rgba(0,0,0,0.00) 60%),
    linear-gradient(180deg, rgba(160,234,82,0.98) 0%, rgba(94,133,66,0.98) 100%) !important;

  color: rgba(255,255,255,0.98) !important;
  font-weight: 1000 !important;

  cursor:pointer !important;
  display:flex !important;
  align-items:center !important;
  gap: 14px !important;

  box-shadow: 0 22px 46px rgba(15,23,42,0.14), inset 0 1px 0 rgba(255,255,255,0.18) !important;
  white-space: nowrap !important;
}

.apToolbar{
  display:flex !important;
  gap: 18px !important;
  align-items:flex-end !important;
  justify-content:space-between !important;

  margin-top: 18px !important;
  padding: 0 12px 22px 0 !important;
  flex-wrap: wrap !important;

  border-bottom: 1px solid rgba(15,23,42,0.08) !important;
}

.apSearch{
  flex: 1 !important;
  min-width: min(780px, 100%) !important;

  position: relative !important;
  height: 82px !important;
  border-radius: var(--pill) !important;

  display:grid !important;
  grid-template-columns: 72px 1fr !important;
  align-items:center !important;

  background: rgba(255,255,255,0.62) !important;
  border: 1px solid var(--glass-border) !important;

  box-shadow: var(--shadow-soft), inset 0 1px 0 rgba(255,255,255,0.75) !important;

  -webkit-backdrop-filter: blur(16px) saturate(1.12) !important;
  backdrop-filter: blur(16px) saturate(1.12) !important;
}

.apSearchIcon{
  display:grid !important;
  place-items:center !important;
  color: rgba(31,41,55,0.86) !important;
}
.apSearchIcon svg{ width: 26px !important; height: 26px !important; }

.apSearchInput{
  height: 100% !important;
  width: 100% !important;
  border: 0 !important;
  outline: none !important;
  background: transparent !important;

  padding: 0 26px 0 0 !important;
  border-radius: inherit !important;

  font-size: 24px !important;
  font-weight: 900 !important;
  color: rgba(31,41,55,0.92) !important;
  min-width: 0 !important;
}

.apStats{ display:flex !important; align-items:flex-end !important; }
.apStat{
  display:grid !important;
  gap: 8px !important;

  padding: 18px 22px !important;
  border-radius: 26px !important;

  border: 1px solid var(--border) !important;
  background: linear-gradient(180deg, rgba(255,255,255,0.92) 0%, rgba(238,242,247,0.92) 100%) !important;

  box-shadow: var(--shadow-soft), inset 0 1px 0 rgba(255,255,255,0.90) !important;
  min-width: 200px !important;
}

/* ✅ ÁREA ROLÁVEL (só aqui existe scroll) */
.apScroll{
  flex: 1 1 auto !important;
  min-height: 0 !important;         /* ✅ essencial para scroll funcionar em flex */
  overflow-y: auto !important;
  overflow-x: hidden !important;    /* ✅ nada vaza lateral */
  padding-bottom: 12px !important;  /* ✅ evita “cortar” última linha */

  scrollbar-gutter: stable both-edges;
  overscroll-behavior: contain;

  scrollbar-width: thin;
  scrollbar-color: rgba(15,23,42,0.18) transparent;
}
.apScroll::-webkit-scrollbar{ width: 12px; height: 12px; }
.apScroll::-webkit-scrollbar-track{ background: transparent; }
.apScroll::-webkit-scrollbar-thumb{
  background-color: rgba(15,23,42,0.16);
  border-radius: 999px;
  border: 3px solid transparent;
  background-clip: padding-box;
}
.apScroll::-webkit-scrollbar-thumb:hover{
  background-color: rgba(15,23,42,0.24);
}

/* ✅ apBody não pode “empurrar” o card */
.apBody{
  margin-top: 24px !important;
  padding: 0 12px 0 0 !important;

  min-height: 0 !important;
  overflow: hidden !important;      /* ✅ garante que itens não escapem do card */
}

.apState{
  padding: 19px 22px !important;
  border-radius: 30px !important;
  background: linear-gradient(180deg, rgba(255,255,255,0.92) 0%, rgba(238,242,247,0.92) 100%) !important;
  border: 1px solid var(--border) !important;
  font-weight: 900 !important;
  box-shadow: var(--shadow-soft), inset 0 1px 0 rgba(255,255,255,0.90) !important;
  font-size: 19px !important;
}
.apState.is-error{
  border-color: rgba(239, 68, 68, 0.24) !important;
  background: linear-gradient(180deg, rgba(239,68,68,0.10), rgba(239,68,68,0.06)) !important;
  color: rgba(127,29,29,0.96) !important;
}

/* GRID */
.apGrid{
  list-style:none !important;
  margin: 0 !important;
  padding: 0 0 12px 0 !important;

  display:grid !important;
  grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
  gap: 18px !important;

  min-width: 0 !important;
}
@media (max-width: 1180px){
  .apGrid{ grid-template-columns: 1fr !important; }
}

/* Item card */
.apItem{
  border-radius: var(--r-lg) !important;
  background: linear-gradient(180deg, rgba(255,255,255,0.92) 0%, rgba(238,242,247,0.92) 100%) !important;
  border: 1px solid var(--border) !important;
  box-shadow: var(--shadow), inset 0 1px 0 rgba(255,255,255,0.90) !important;

  padding: 22px !important;
  min-width: 0 !important;
}

.apItemTop{
  display:flex !important;
  align-items:flex-start !important;
  justify-content: space-between !important;
  gap: 18px !important;
  min-width: 0 !important;
}

.apItemMain{ flex: 1 !important; min-width: 0 !important; }

.apItemName{
  font-size: 24px !important;
  font-weight: 1000 !important;
  line-height: 1.2 !important;
  color: rgba(31,41,55,0.92) !important;

  overflow: hidden !important;         /* ✅ evita estourar largura */
  text-overflow: ellipsis !important;
  white-space: nowrap !important;
}

.apItemMeta{
  margin-top: 14px !important;
  display:flex !important;
  gap: 12px !important;
  flex-wrap: wrap !important;
  min-width: 0 !important;
}

/* Pills */
.apPill{
  font-size: 15px !important;
  font-weight: 1000 !important;
  letter-spacing: 0.08em !important;
  text-transform: uppercase !important;

  padding: 10px 16px !important;
  border-radius: 999px !important;

  border: 1px solid var(--border-2) !important;
  background: linear-gradient(180deg, #ffffff 0%, #eef2f7 100%) !important;

  color: rgba(55,65,81,0.86) !important;
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.85) !important;

  display:inline-flex !important;
  align-items:center !important;
  gap: 10px !important;

  max-width: 100% !important;
  min-width: 0 !important;
}

.apPillK{ opacity: .85 !important; }

.apPillV{
  letter-spacing: 0 !important;
  text-transform: none !important;

  overflow:hidden !important;
  text-overflow: ellipsis !important;
  white-space: nowrap !important;

  max-width: 520px !important;
  min-width: 0 !important;
}

/* Actions */
.apItemActions{
  display:flex !important;
  gap: 12px !important;
  flex: 0 0 auto !important;
}

.apIconBtn{
  width: 64px !important;
  height: 64px !important;
  border-radius: var(--pill) !important;

  border: 1px solid var(--border) !important;
  background: linear-gradient(180deg, #ffffff 0%, #eef2f7 100%) !important;

  display:grid !important;
  place-items:center !important;
  cursor:pointer !important;

  box-shadow: var(--shadow-soft), inset 0 1px 0 rgba(255,255,255,0.90) !important;
}

.apIconBtn.is-danger{
  border-color: rgba(239, 68, 68, 0.24) !important;
  background: rgba(239,68,68,0.10) !important;
}

.apIcon{ width: 26px !important; height: 26px !important; color: rgba(55,65,81,0.90) !important; }

/* Modal */
.cbModalOverlay.apModalOverlay{
  position: fixed !important;
  inset: 0 !important;
  z-index: 9999 !important;

  display: grid !important;
  place-items: center !important;

  background: rgba(15, 23, 42, 0.52) !important;
  padding: 24px !important;

  -webkit-backdrop-filter: blur(14px) saturate(1.1) !important;
  backdrop-filter: blur(14px) saturate(1.1) !important;
}

.cbModalPanel.apModalPanel{
  width: min(780px, 100%) !important;
  max-height: calc(100dvh - 48px) !important;
  overflow: hidden !important;

  border-radius: 35px !important;
  background: rgba(255,255,255,0.74) !important;
  border: 1px solid var(--glass-border) !important;
  box-shadow: var(--shadow-lg), inset 0 1px 0 rgba(255,255,255,0.65) !important;

  -webkit-backdrop-filter: blur(19px) saturate(1.12) !important;
  backdrop-filter: blur(19px) saturate(1.12) !important;

  color: rgba(31,41,55,0.92) !important;
}

.cbModalBody{
  padding: 24px 24px 8px !important;
  max-height: calc(100dvh - 220px) !important;
  overflow: auto !important;
}

.apDangerBtn{
  background: linear-gradient(180deg, rgba(239,68,68,0.90) 0%, rgba(190,40,40,0.90) 100%) !important;
  border-color: rgba(239, 68, 68, 0.24) !important;
}

/* Responsivo */
@media (max-width: 980px){
  .apCard{
    padding: 44px 44px 22px !important;
    border-radius: 30px !important;
  }
  .apToolbar{
    flex-direction: column !important;
    align-items: stretch !important;
  }
  .apSearch{ min-width: 0 !important; }
}
@media (max-width: 720px){
  .apCard{ padding: 34px 24px 18px !important; }
  .apHeader{ flex-direction: column !important; align-items: stretch !important; gap: 16px !important; }
  .apAddBtn{ width: 100% !important; justify-content: center !important; }
}

/* Hard override */
body .analysisPage.apPage{
  position: fixed !important;
  overflow: hidden !important;
  min-height: 0 !important;
}
body .analysisPage.apPage > .pg-card.apCard{
  min-height: 0 !important;
  overflow: hidden !important;
  display: flex !important;
  flex-direction: column !important;
}
body .analysisPage.apPage > .pg-card.apCard > .apScroll{
  flex: 1 1 auto !important;
  min-height: 0 !important;
  overflow-y: auto !important;
  overflow-x: hidden !important;
}
/* =========================================================
   ✅ POPUP (MODAL) — "Adicionar plano" / "Editar plano"
   Glass Light + Scroll interno + Versão COMPACTA (menor)
   Cole no FINAL do AdminPlanosPage.css
========================================================= */

/* Overlay do modal (leve + blur) */
.cbModalOverlay.apModalOverlay{
  background: rgba(15, 23, 42, 0.52) !important;
  padding: 18px !important;
  -webkit-backdrop-filter: blur(12px) saturate(1.06) !important;
  backdrop-filter: blur(12px) saturate(1.06) !important;
}

/* Painel do modal (menor) */
.cbModalPanel.apModalPanel{
  width: min(720px, 100%) !important;
  max-height: calc(100dvh - 36px) !important;
  overflow: hidden !important;

  border-radius: 28px !important;
  border: 1px solid rgba(255,255,255,0.34) !important;

  background:
    radial-gradient(820px 380px at 14% 110%, rgba(160,234,82,0.16), rgba(255,255,255,0) 60%),
    radial-gradient(820px 380px at 86% 110%, rgba(160,234,82,0.09), rgba(255,255,255,0) 62%),
    linear-gradient(180deg, rgba(255,255,255,0.78) 0%, rgba(247,248,251,0.68) 100%) !important;

  box-shadow: 0 26px 70px rgba(15,23,42,0.18), inset 0 1px 0 rgba(255,255,255,0.65) !important;

  -webkit-backdrop-filter: blur(16px) saturate(1.10) !important;
  backdrop-filter: blur(16px) saturate(1.10) !important;

  color: rgba(31,41,55,0.92) !important;
}

/* Header do modal (compacto) */
.cbModalHeader{
  padding: 16px 18px !important;
  border-bottom: 1px solid rgba(15,23,42,0.10) !important;
}

.cbModalTitle{
  font-size: 18px !important;
  font-weight: 1000 !important;
  letter-spacing: -0.01em !important;
  margin: 0 !important;
}

/* Botão fechar (menor) */
.cbModalClose{
  width: 44px !important;
  height: 44px !important;
  border-radius: 9999px !important;
  border: 1px solid rgba(15, 23, 42, 0.12) !important;

  background: linear-gradient(180deg, #ffffff 0%, #eef2f7 100%) !important;
  box-shadow: 0 10px 22px rgba(15,23,42,0.10), inset 0 1px 0 rgba(255,255,255,0.85) !important;

  color: rgba(31,41,55,0.88) !important;
  font-size: 24px !important;
  line-height: 1 !important;
  cursor: pointer !important;

  display: grid !important;
  place-items: center !important;
}

/* ✅ Corpo com scroll interno (compacto) */
.cbModalBody{
  padding: 16px 18px 10px !important;
  max-height: calc(100dvh - 180px) !important; /* header+footer */
  overflow: auto !important;

  scrollbar-width: thin;
  scrollbar-color: rgba(15,23,42,0.18) transparent;
}
.cbModalBody::-webkit-scrollbar{ width: 10px; height: 10px; }
.cbModalBody::-webkit-scrollbar-track{ background: transparent; }
.cbModalBody::-webkit-scrollbar-thumb{
  background-color: rgba(15,23,42,0.16);
  border-radius: 999px;
  border: 2px solid transparent;
  background-clip: padding-box;
}
.cbModalBody::-webkit-scrollbar-thumb:hover{
  background-color: rgba(15,23,42,0.24);
}

/* Footer (compacto) */
.cbModalFooter{
  padding: 12px 18px 16px !important;
  border-top: 1px solid rgba(15,23,42,0.10) !important;
  gap: 10px !important;
}

/* Botões do modal (menores) */
.cbBtnPrimary, .cbBtnGhost{
  height: 48px !important;
  padding: 0 18px !important;
  border-radius: 9999px !important;

  font-weight: 1000 !important;
  font-size: 15px !important;
  cursor: pointer !important;
}

.cbBtnPrimary{
  border: 1px solid rgba(94,133,66,0.25) !important;
  background:
    linear-gradient(180deg, rgba(0,0,0,0.06) 0%, rgba(0,0,0,0.00) 60%),
    linear-gradient(180deg, rgba(160,234,82,0.98) 0%, rgba(94,133,66,0.98) 100%) !important;
  color: rgba(255,255,255,0.98) !important;
}

.cbBtnGhost{
  border: 1px solid rgba(15, 23, 42, 0.12) !important;
  background: linear-gradient(180deg, #ffffff 0%, #eef2f7 100%) !important;
  color: rgba(31,41,55,0.92) !important;
}

/* =========================================================
   ✅ FORM DENTRO DO MODAL (compacto)
========================================================= */

.apForm{
  display: grid !important;
  gap: 12px !important;
}

.apRow{
  display: grid !important;
  gap: 8px !important;
}

.apLabel{
  font-size: 12px !important;
  font-weight: 950 !important;
  letter-spacing: 0.12em !important;
  text-transform: uppercase !important;
  color: rgba(55,65,81,0.72) !important;
}

/* Inputs do modal (menores) */
.apInput{
  width: 100% !important;
  height: 52px !important;
  border-radius: 9999px !important;

  border: 1px solid rgba(15, 23, 42, 0.12) !important;
  background: linear-gradient(180deg, #ffffff 0%, #eef2f7 100%) !important;

  padding: 0 16px !important;
  font-size: 16px !important;
  font-weight: 850 !important;
  color: rgba(31,41,55,0.92) !important;

  outline: none !important;
  box-shadow: 0 10px 22px rgba(15,23,42,0.08), inset 0 1px 0 rgba(255,255,255,0.85) !important;
}

.apInput:focus{
  border-color: rgba(94,133,66,0.32) !important;
  box-shadow:
    0 0 0 4px rgba(94,133,66,0.10),
    0 14px 28px rgba(15,23,42,0.12),
    inset 0 1px 0 rgba(255,255,255,0.85) !important;
}

.apHelp{
  font-size: 13px !important;
  font-weight: 850 !important;
  color: rgba(107,114,128,0.86) !important;
}

/* 2 colunas no modal (compacto) */
.apTwoCols{
  display: grid !important;
  grid-template-columns: 1fr 1fr !important;
  gap: 12px !important;
}
@media (max-width: 720px){
  .apTwoCols{ grid-template-columns: 1fr !important; }
}

/* Preview dentro do modal (compacto) */
.apPreview{
  margin-top: 6px !important;
  padding-top: 12px !important;
  border-top: 1px solid rgba(15,23,42,0.10) !important;
}

.apPreviewTitle{
  font-size: 11px !important;
  font-weight: 950 !important;
  letter-spacing: .12em !important;
  text-transform: uppercase !important;
  color: rgba(55,65,81,0.70) !important;
  margin-bottom: 8px !important;
}

.apPreviewCard{
  padding: 12px !important;
  border-radius: 18px !important;
  border: 1px solid rgba(15, 23, 42, 0.10) !important;

  background: linear-gradient(180deg, rgba(255,255,255,0.92) 0%, rgba(238,242,247,0.92) 100%) !important;
  box-shadow: 0 10px 22px rgba(15,23,42,0.08), inset 0 1px 0 rgba(255,255,255,0.90) !important;
}

.apPreviewName{
  font-weight: 1000 !important;
  font-size: 16px !important;
  color: rgba(31,41,55,0.92) !important;
}

.apPreviewMeta{
  margin-top: 6px !important;
  display: flex !important;
  flex-wrap: wrap !important;
  gap: 8px !important;
  font-weight: 850 !important;
  font-size: 13px !important;
  color: rgba(75,85,99,0.86) !important;
}

.apPreviewStripe{
  margin-top: 8px !important;
  font-weight: 850 !important;
  font-size: 13px !important;
  color: rgba(107,114,128,0.86) !important;
  overflow: hidden !important;
  text-overflow: ellipsis !important;
  white-space: nowrap !important;
}

/* Responsivo extra (bem pequeno) */
@media (max-width: 480px){
  .cbModalOverlay.apModalOverlay{ padding: 12px !important; }
  .cbModalPanel.apModalPanel{ border-radius: 22px !important; }
  .cbModalHeader{ padding: 14px 14px !important; }
  .cbModalBody{ padding: 14px 14px 10px !important; }
  .cbModalFooter{ padding: 12px 14px 14px !important; }
  .cbBtnPrimary, .cbBtnGhost{ width: 100% !important; }
}
